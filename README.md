# Laravel æ¨¡å—ç³»ç»Ÿ - å®Œæ•´æŒ‡å—

ä¸€ä¸ªä¸º Laravel 11+ è®¾è®¡çš„ç°ä»£åŒ–ã€å·¥ä¸šçº§æ¨¡å—åŒ–ç³»ç»Ÿï¼ŒåŸºäº PHP 8.2+ å¼€å‘ã€‚

## ğŸ“– æ–‡æ¡£ç›®å½•

### å¿«é€Ÿå¼€å§‹
- [åŠŸèƒ½ä¸€è§ˆ](docs/00-overview.md) - æ‰€æœ‰åŠŸèƒ½å’Œé…ç½®çš„å®Œæ•´è¡¨æ ¼
- [å®‰è£…æŒ‡å—](docs/01-installation.md)
- [å¿«é€Ÿå¼€å§‹](docs/02-quickstart.md)

### æ ¸å¿ƒåŠŸèƒ½
- [æ¨¡å—ç»“æ„](docs/03-module-structure.md)
- [é…ç½®è¯¦è§£](docs/04-configuration.md)
- [Helper å‡½æ•°](docs/05-helper-functions.md)
- [æ™ºèƒ½æ¨¡å—æ£€æµ‹](docs/06-intelligent-detection.md)

### è·¯ç”±ä¸è§†å›¾
- [è·¯ç”±æŒ‡å—](docs/07-routes.md)
- [è§†å›¾ä½¿ç”¨](docs/08-views.md)

### å¼€å‘æŒ‡å—
- [å‘½ä»¤å‚è€ƒ](docs/09-commands.md)
- [ä»£ç ç”Ÿæˆ](docs/10-code-generation.md)
- [è¿ç§»ç®¡ç†](docs/11-migrations.md)
- [è‡ªåŠ¨å‘ç°æœºåˆ¶](docs/14-auto-discovery.md)
- [Stub æ¨¡æ¿æ˜ å°„](docs/15-stub-mapping.md)

### è°ƒè¯•ä¸æ•…éšœæ’é™¤
- [å‘½ä»¤æ•…éšœæ’é™¤](docs/16-command-troubleshooting.md)
- [å‘½ä»¤æµ‹è¯•æŒ‡å—](docs/17-command-testing-guide.md)

### æœ€ä½³å®è·µ
- [æœ€ä½³å®è·µ](docs/12-best-practices.md)
- [æ¶æ„è®¾è®¡](docs/13-architecture.md)

## ğŸš€ ç‰¹æ€§

- **ç°ä»£åŒ–æ¶æ„**ï¼šä¸“ä¸º Laravel 11+ å’Œ PHP 8.2+ è®¾è®¡
- **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡ config æ§åˆ¶æ‰€æœ‰æ¨¡å—è¡Œä¸ºï¼Œæ— éœ€ JSON æ–‡ä»¶
- **æ¨¡å—å¯ç”¨/ç¦ç”¨**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶æ§åˆ¶æ¨¡å—æ˜¯å¦å¯ç”¨ï¼Œç¦ç”¨æ—¶å®Œå…¨ä¸åŠ è½½æ¨¡å—ç»„ä»¶
- **åŠ¨æ€è·¯ç”±ç”Ÿæˆ**ï¼šè·¯ç”±å‰ç¼€å’Œåç§°å‰ç¼€æ ¹æ®é…ç½®åŠ¨æ€ç”Ÿæˆ
- **è‡ªåŠ¨å‘ç°æœºåˆ¶**ï¼šè‡ªåŠ¨å‘ç°æ¨¡å—çš„æœåŠ¡æä¾›è€…ã€è·¯ç”±ã€å‘½ä»¤ã€äº‹ä»¶ç­‰
- **çµæ´»é…ç½®**ï¼šæ”¯æŒå¤šè·¯ç”±ä¸­é—´ä»¶ç»„ã€æ§åˆ¶å™¨å‘½åç©ºé—´æ˜ å°„
- **åŠŸèƒ½å®Œæ•´**ï¼šæ”¯æŒè·¯ç”±ã€è§†å›¾ã€é…ç½®ã€è¿ç§»ã€å‘½ä»¤ã€äº‹ä»¶ç­‰å®Œæ•´åŠŸèƒ½
- **ä¿¡æ¯ç»Ÿè®¡**ï¼šæä¾›è¯¦ç»†çš„æ¨¡å—ä¿¡æ¯å’ŒéªŒè¯åŠŸèƒ½
- **è¿ç§»å¢å¼º**ï¼šå®Œæ•´çš„è¿ç§»ç®¡ç†å‘½ä»¤ï¼ŒåŒ…æ‹¬çŠ¶æ€æŸ¥çœ‹å’Œç»Ÿè®¡ä¿¡æ¯
- **åŠ©æ‰‹å‡½æ•°**ï¼š40+ ä¸ªä¾¿æ·åŠ©æ‰‹å‡½æ•°ï¼Œå¤§éƒ¨åˆ†æ”¯æŒæ— å‚è°ƒç”¨
- **æ¨¡å—éªŒè¯**ï¼šéªŒè¯æ¨¡å—çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§
- **æ¨¡æ¿ç³»ç»Ÿ**ï¼šåŸºäº stubs çš„ä»£ç ç”Ÿæˆæ¨¡æ¿ç³»ç»Ÿ
- **è§†å›¾å‘½åç©ºé—´**ï¼šæ”¯æŒæ¨¡å—è§†å›¾å‘½åç©ºé—´ï¼Œå¦‚ `blog::list.test`
- **è·¯ç”±æ˜ å°„**ï¼šçµæ´»çš„è·¯ç”±æ§åˆ¶å™¨å‘½åç©ºé—´æ˜ å°„
- **å¤šè·¯å¾„æ‰«æ**ï¼šæ”¯æŒå¤šä¸ªæ¨¡å—ç›®å½•æ‰«æ
- **æ™ºèƒ½æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹å½“å‰æ¨¡å—ï¼Œæ”¯æŒåµŒå¥—é…ç½®è¯»å–
- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–çš„æ ¸å¿ƒå‡½æ•°ï¼Œä¿è¯ç”Ÿäº§ç¯å¢ƒé«˜æ•ˆè¿è¡Œ
- **å‘½ä»¤è‡ªåŠ¨æ³¨å†Œ**ï¼šæ¨¡å—å‘½ä»¤è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œåˆ° Laravel Console Application
- **è¯¦ç»†çš„ä¸­æ–‡æ—¥å¿—**ï¼šæ‰€æœ‰æ“ä½œéƒ½æœ‰è¯¦ç»†çš„ä¸­æ–‡æ—¥å¿—è®°å½•
- **æ™ºèƒ½æ¨¡å‹ç”Ÿæˆ**ï¼šæ”¯æŒä»æ•°æ®åº“è¡¨è‡ªåŠ¨è§£æå­—æ®µä¿¡æ¯ï¼Œç”Ÿæˆå®Œæ•´çš„ Eloquent æ¨¡å‹
- **å­—æ®µæ³¨é‡Šè§£æ**ï¼šè‡ªåŠ¨è¯»å–æ•°æ®åº“å­—æ®µæ³¨é‡Šå¹¶ç”Ÿæˆåˆ°æ¨¡å‹çš„ PHPDoc ä¸­
- **ç±»å‹æ™ºèƒ½æ˜ å°„**ï¼šè‡ªåŠ¨å°†æ•°æ®åº“å­—æ®µç±»å‹æ˜ å°„åˆ° Laravel ç±»å‹è½¬æ¢æ ¼å¼
- **Carbon é›†æˆ**ï¼šdatetime/timestamp å­—æ®µè‡ªåŠ¨ä½¿ç”¨ Carbon ç±»å‹
- **è¿ç§»çŠ¶æ€è¿‡æ»¤**ï¼šæ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰è¿ç§»ï¼ˆå·²è¿è¡Œ/å¾…è¿è¡Œï¼‰
- **è¿ç§»ç»Ÿè®¡ä¿¡æ¯**ï¼šæ˜¾ç¤ºè¿ç§»ç»Ÿè®¡æ±‡æ€»ä¿¡æ¯

## ğŸ“¦ å¿«é€Ÿå®‰è£…

### é€šè¿‡ Composer å®‰è£…

```bash
composer require zxf/modules
```

### 1. å‘å¸ƒé…ç½®æ–‡ä»¶

```bash
php artisan vendor:publish --provider="zxf\\Modules\\ModulesServiceProvider"
```

é…ç½®æ–‡ä»¶ä¼šå‘å¸ƒåˆ°ï¼š`config/modules.php`

### 2. åˆ›å»ºç¬¬ä¸€ä¸ªæ¨¡å—

```bash
php artisan module:make Blog
```

### 3. æŸ¥çœ‹æ¨¡å—åˆ—è¡¨

```bash
php artisan module:list
```

### 4. æŸ¥çœ‹æ¨¡å—è¯¦ç»†ä¿¡æ¯

```bash
php artisan module:info Blog
```

### 5. éªŒè¯æ¨¡å—

```bash
php artisan module:validate Blog
```

### 6. å‘å¸ƒå¤šæ¨¡å—èµ„æº

```bash
# å‘å¸ƒæ‰€æœ‰èµ„æºï¼ˆç”¨æˆ·æŒ‡å—ã€é…ç½®æ–‡ä»¶ï¼‰
php artisan module:publish

# ä»…å‘å¸ƒç”¨æˆ·æŒ‡å—
php artisan module:publish --guide

# ä»…å‘å¸ƒé…ç½®æ–‡ä»¶
php artisan module:publish --config

# å¼ºåˆ¶è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶
php artisan module:publish --force
```

å‘å¸ƒåï¼Œå¤šæ¨¡å—ç”¨æˆ·æŒ‡å—å°†ä½äºï¼š`Modules/ModulesUserGuide.md`

### 7. è¿è¡Œæ¨¡å—è¿ç§»

```bash
# è¿è¡Œæ‰€æœ‰æ¨¡å—çš„è¿ç§»
php artisan module:migrate

# è¿è¡ŒæŒ‡å®šæ¨¡å—çš„è¿ç§»
php artisan module:migrate Blog

# æŸ¥çœ‹è¿ç§»çŠ¶æ€
php artisan module:migrate-status

# å›æ»šè¿ç§»
php artisan module:migrate:reset Blog

# åˆ·æ–°è¿ç§»ï¼ˆå›æ»šå¹¶é‡æ–°è¿è¡Œï¼‰
php artisan module:migrate:refresh Blog
```

### 8. è¿è¡Œæ¨¡å—å‘½ä»¤

```bash
# è¿è¡Œæ¨¡å—çš„é»˜è®¤å‘½ä»¤
php artisan blog:command

# åˆ›å»ºè‡ªå®šä¹‰å‘½ä»¤
php artisan module:make-command Blog TestCommand --command=blog:test

# è¿è¡Œè‡ªå®šä¹‰å‘½ä»¤
php artisan blog:test

# è°ƒè¯•å‘½ä»¤æ³¨å†Œ
php artisan module:debug-commands --module=Blog
```

### 9. åˆ é™¤æ¨¡å—

```bash
# åˆ é™¤æ¨¡å—ï¼ˆä¼šæç¤ºç¡®è®¤ï¼‰
php artisan module:delete Blog

# å¼ºåˆ¶åˆ é™¤ï¼ˆä¸æç¤ºç¡®è®¤ï¼‰
php artisan module:delete Blog --force
```

## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½ç¤ºä¾‹

### æ™ºèƒ½å½“å‰æ¨¡å—æ£€æµ‹

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰ä»£ç æ‰€åœ¨çš„æ¨¡å—ï¼Œæ— éœ€æ‰‹åŠ¨ä¼ é€’æ¨¡å—åç§°ï¼š

```php
// åœ¨æ¨¡å—å†…éƒ¨çš„ä»»ä½•åœ°æ–¹
$moduleName = module_name(); // è‡ªåŠ¨è¿”å› 'Blog'
$enabled = module_enabled();  // æ£€æŸ¥å½“å‰æ¨¡å—æ˜¯å¦å¯ç”¨

// è¯»å–æ¨¡å—é…ç½®ï¼ˆè‡ªåŠ¨æ£€æµ‹å½“å‰æ¨¡å—ï¼‰
$name = module_config('common.name', 'hello');
$cache = module_config('settings.cache.enabled', false);
```

### è·å–æ¨¡å—è·¯å¾„

```php
// è‡ªåŠ¨æ£€æµ‹å½“å‰æ¨¡å—
$path = module_path(null, 'Models/Post.php');
$path = module_path('Config/common.php');

// æŒ‡å®šæ¨¡å—å
$path = module_path('Blog', 'Models/Post.php');

// è·å–å„ç§ç±»å‹çš„è·¯å¾„
$configPath = module_config_path('common.php');
$routePath = module_routes_path('web.php');
$migrationPath = module_migrations_path();
$modelsPath = module_models_path();
$controllersPath = module_controllers_path('Web');
$viewsPath = module_views_path();
```

### è¿”å›æ¨¡å—è§†å›¾

```php
// è‡ªåŠ¨æ£€æµ‹å½“å‰æ¨¡å—
return module_view('post.index', compact('posts'));

// æŒ‡å®šæ¨¡å—å
return module_view('Blog', 'post.index', ['posts' => $posts]);
```

### ç”Ÿæˆè·¯ç”± URL

```php
// è‡ªåŠ¨æ£€æµ‹å½“å‰æ¨¡å—
$url = module_route('posts.index');
$url = module_route('posts.show', ['id' => 1]);

// æŒ‡å®šæ¨¡å—å
$url = module_route('Blog', 'posts.index');
```

## ğŸ“š æ¨¡å—ç»“æ„

æ¨¡å—åˆ›å»ºåä¼šç”Ÿæˆä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
Modules/
â””â”€â”€ Blog/
    â”œâ”€â”€ Config/
    â”‚   â”œâ”€â”€ config.php           # æ¨¡å—é…ç½®æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
    â”‚   â”œâ”€â”€ common.php          # è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
    â”‚   â””â”€â”€ settings.php       # è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
    â”œâ”€â”€ Console/
    â”‚   â””â”€â”€ Commands/          # Artisan å‘½ä»¤
    â”œâ”€â”€ Database/
    â”‚   â”œâ”€â”€ Migrations/         # æ•°æ®åº“è¿ç§»æ–‡ä»¶
    â”‚   â””â”€â”€ Seeders/            # æ•°æ®å¡«å……å™¨
    â”œâ”€â”€ Http/
    â”‚   â”œâ”€â”€ Controllers/         # æ§åˆ¶å™¨
    â”‚   â”‚   â”œâ”€â”€ Controller.php  # åŸºç¡€æ§åˆ¶å™¨
    â”‚   â”‚   â”œâ”€â”€ Web/          # Web æ§åˆ¶å™¨
    â”‚   â”‚   â”œâ”€â”€ Api/          # API æ§åˆ¶å™¨
    â”‚   â”‚   â””â”€â”€ Admin/        # Admin æ§åˆ¶å™¨
    â”‚   â”œâ”€â”€ Middleware/         # ä¸­é—´ä»¶
    â”‚   â””â”€â”€ Requests/           # è¡¨å•è¯·æ±‚éªŒè¯
    â”œâ”€â”€ Models/                  # æ¨¡å‹
    â”œâ”€â”€ Observers/              # æ¨¡å‹è§‚å¯Ÿè€…
    â”œâ”€â”€ Providers/
    â”‚   â””â”€â”€ BlogServiceProvider.php  # æ¨¡å—æœåŠ¡æä¾›è€…ï¼ˆå¿…éœ€ï¼‰
    â”œâ”€â”€ Resources/
    â”‚   â”œâ”€â”€ assets/             # é™æ€èµ„æº
    â”‚   â”œâ”€â”€ lang/               # è¯­è¨€æ–‡ä»¶
    â”‚   â””â”€â”€ views/             # è§†å›¾æ–‡ä»¶
    â”œâ”€â”€ Routes/
    â”‚   â”œâ”€â”€ web.php            # Web è·¯ç”±
    â”‚   â”œâ”€â”€ api.php            # API è·¯ç”±
    â”‚   â””â”€â”€ admin.php          # Admin è·¯ç”±
    â”œâ”€â”€ Events/                 # äº‹ä»¶
    â”œâ”€â”€ Listeners/              # äº‹ä»¶ç›‘å¬å™¨
    â”œâ”€â”€ Policies/               # ç­–ç•¥ç±»
    â”œâ”€â”€ Repositories/           # ä»“åº“ç±»
    â””â”€â”€ Tests/                  # æµ‹è¯•æ–‡ä»¶
```

## ğŸ¯ é…ç½®ç¤ºä¾‹

æ¨¡å—ç³»ç»Ÿçš„æ‰€æœ‰é…ç½®éƒ½åœ¨ `config/modules.php` æ–‡ä»¶ä¸­ï¼š

```php
return [
    // å‘½åç©ºé—´é…ç½®
    'namespace' => 'Modules',
    
    // æ¨¡å—è·¯å¾„
    'path' => base_path('Modules'),
    
    // ä¸­é—´ä»¶ç»„é…ç½®
    'middleware_groups' => [
        'web' => ['web'],
        'api' => ['api'],
        'admin' => ['web', 'admin'],
    ],
    
    // æ§åˆ¶å™¨å‘½åç©ºé—´æ˜ å°„
    'controller_namespace_map' => [
        'web' => 'Web',
        'api' => 'Api',
        'admin' => 'Admin',
    ],
    
    // è·¯ç”±é…ç½®
    'routes' => [
        'web' => [
            'prefix' => null,
            'as' => null,
        ],
        'api' => [
            'prefix' => 'api',
            'as' => 'api.',
        ],
    ],
    
    // æ¨¡å—å¯ç”¨åˆ—è¡¨
    'enabled' => [
        'Blog',
        'Admin',
    ],
    
    // è‡ªåŠ¨å‘ç°é…ç½®
    'discovery' => [
        'providers' => true,
        'configs' => true,
        'middlewares' => true,
        'routes' => true,
        'views' => true,
        'migrations' => true,
        'translations' => true,
        'commands' => true,
        'events' => true,
        'observers' => true,
        'policies' => true,
        'repositories' => true,
    ],
];
```

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ [é…ç½®è¯¦è§£](docs/04-configuration.md)ã€‚

## ğŸ”§ æ ¸å¿ƒç‰¹æ€§

### 1. æ™ºèƒ½å½“å‰æ¨¡å—æ£€æµ‹

ç³»ç»Ÿæä¾› `module_name()` å‡½æ•°ï¼Œå¯ä»¥è‡ªåŠ¨æ£€æµ‹å½“å‰ä»£ç æ‰€åœ¨çš„æ¨¡å—ï¼š

```php
class PostController extends Controller
{
    public function index()
    {
        $moduleName = module_name(); // è‡ªåŠ¨è¿”å› 'Blog'
        $path = module_path();     // è‡ªåŠ¨è·å– Blog æ¨¡å—çš„è·¯å¾„
        $config = module_config('common.name'); // è‡ªåŠ¨è¯»å– Blog æ¨¡å—çš„é…ç½®
        
        // æ‰€æœ‰å‡½æ•°éƒ½æ— éœ€ä¼ é€’ä»»ä½•å‚æ•°
    }
}
```

### 2. å¢å¼ºçš„é…ç½®è¯»å–

`module_config()` å‡½æ•°æ”¯æŒä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š

**æ–¹å¼ 1ï¼šæŒ‡å®šæ¨¡å—åç§°ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰**
```php
$value = module_config('common.name', 'default', 'Blog');
```

**æ–¹å¼ 2ï¼šä½¿ç”¨å½“å‰æ¨¡å—ï¼ˆæ™ºèƒ½æ–¹å¼ï¼‰â­ æ¨è**

```php
// è¯»å– Config/common.php çš„ name é…ç½®
$value = module_config('common.name', 'hello');

// è¯»å–åµŒå¥—é…ç½®
$enabled = module_config('settings.cache.enabled', false);

// æ— éœ€ä¼ é€’æ¨¡å—åï¼Œè‡ªåŠ¨æ£€æµ‹
```

### 3. å®Œæ•´çš„è·¯å¾„åŠ©æ‰‹å‡½æ•°

```php
// æ¨¡å—è·¯å¾„
module_path('Models');              // å½“å‰æ¨¡å—çš„ Models ç›®å½•
module_path('Blog', 'Models');     // Blog æ¨¡å—çš„ Models ç›®å½•

// é…ç½®æ–‡ä»¶è·¯å¾„
module_config_path('common.php');  // å½“å‰æ¨¡å—çš„ Config/common.php

// è·¯ç”±æ–‡ä»¶è·¯å¾„
module_routes_path('web');         // å½“å‰æ¨¡å—çš„ Routes/web.php

// è¿ç§»ç›®å½•è·¯å¾„
module_migrations_path();          // å½“å‰æ¨¡å—çš„ Database/Migrations

// æ¨¡å‹ç›®å½•è·¯å¾„
module_models_path();              // å½“å‰æ¨¡å—çš„ Models

// æ§åˆ¶å™¨ç›®å½•è·¯å¾„
module_controllers_path('Web');    // å½“å‰æ¨¡å—çš„ Http/Controllers/Web

// è§†å›¾ç›®å½•è·¯å¾„
module_views_path();              // å½“å‰æ¨¡å—çš„ Resources/views

// èµ„æºç›®å½•è·¯å¾„
module_resources_path('assets');  // å½“å‰æ¨¡å—çš„ Resources/assets

// è¯­è¨€ç›®å½•è·¯å¾„
module_lang_path();              // å½“å‰æ¨¡å—çš„ Resources/lang
```

### 4. å‘½ä»¤è‡ªåŠ¨æ³¨å†Œ

æ¨¡å—ä¸­çš„å‘½ä»¤ä¼šè‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œåˆ° Laravel Console Applicationï¼š

```php
// æ¨¡å—ä¸­çš„å‘½ä»¤ï¼šModules/Blog/Console/Commands/TestCommand.php
class TestCommand extends Command
{
    protected $signature = 'blog:test';
    protected $description = 'æµ‹è¯•å‘½ä»¤';
    
    public function handle(): int
    {
        $this->info('æµ‹è¯•å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼');
        return Command::SUCCESS;
    }
}

// è‡ªåŠ¨æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
// å¯ä»¥ç›´æ¥è¿è¡Œï¼šphp artisan blog:test
```

## ğŸ“ Helper å‡½æ•°

æ¨¡å—ç³»ç»Ÿæä¾›äº† 40+ ä¸ªåŠ©æ‰‹å‡½æ•°ï¼Œå¤§å¤§ç®€åŒ–æ¨¡å—æ“ä½œã€‚å¤§éƒ¨åˆ†å‡½æ•°æ”¯æŒæ— å‚è°ƒç”¨ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰æ‰€åœ¨æ¨¡å—ã€‚

### æ ¸å¿ƒå‡½æ•°

```php
// è·å–å½“å‰æ¨¡å—åç§°ï¼ˆç²¾ç¡®æ£€æµ‹ï¼Œä¸ä½¿ç”¨ç¼“å­˜ï¼‰
$moduleName = module_name(); // 'Blog'

// æ™ºèƒ½é…ç½®è¯»å–ï¼ˆæ¨èï¼‰
$name = module_config('common.name', 'hello');
$cache = module_config('settings.cache.enabled', false);

// æ£€æŸ¥æ¨¡å—çŠ¶æ€
if (module_enabled()) {
    // æ¨¡å—å·²å¯ç”¨
}

// è·å–æ¨¡å—è·¯å¾„
$path = module_path(null, 'Models/Post.php');

// è¿”å›æ¨¡å—è§†å›¾
return module_view(null, 'post.index', compact('posts'));

// ç”Ÿæˆæ¨¡å—è·¯ç”± URL
$url = module_route('posts.index', ['id' => 1]);

// æ£€æŸ¥è§†å›¾æ˜¯å¦å­˜åœ¨
if (module_has_view('post.index')) {
    // è§†å›¾å­˜åœ¨
}
```

### è·¯å¾„ç›¸å…³å‡½æ•°

```php
module_path();                  // æ¨¡å—æ ¹è·¯å¾„
module_config_path();          // é…ç½®æ–‡ä»¶è·¯å¾„
module_routes_path();          // è·¯ç”±æ–‡ä»¶è·¯å¾„
module_migrations_path();      // è¿ç§»æ–‡ä»¶è·¯å¾„
module_models_path();          // æ¨¡å‹è·¯å¾„
module_controllers_path();      // æ§åˆ¶å™¨è·¯å¾„
module_views_path();           // è§†å›¾è·¯å¾„
module_resources_path();       // èµ„æºè·¯å¾„
module_lang_path();           // è¯­è¨€æ–‡ä»¶è·¯å¾„
```

### è§†å›¾ç›¸å…³å‡½æ•°

```php
module_view();              // è¿”å›æ¨¡å—è§†å›¾
module_has_view();          // æ£€æŸ¥è§†å›¾æ˜¯å¦å­˜åœ¨
```

### è·¯ç”±ç›¸å…³å‡½æ•°

```php
module_route();            // ç”Ÿæˆæ¨¡å—è·¯ç”± URL
module_has_route();        // æ£€æŸ¥è·¯ç”±æ˜¯å¦å­˜åœ¨
```

æ›´å¤š Helper å‡½æ•°è¯·å‚è€ƒ [Helper å‡½æ•°è¯¦è§£](docs/05-helper-functions.md)ã€‚

## ğŸ› ï¸ å¼€å‘å·¥å…·

### ä»£ç ç”Ÿæˆå‘½ä»¤

```bash
# åˆ›å»ºæ¨¡å—
php artisan module:make Blog

# åˆ›å»ºæ§åˆ¶å™¨
php artisan module:make-controller Blog PostController
php artisan module:make-controller Blog PostController --web
php artisan module:make-controller Blog PostController --api

# åˆ›å»ºæ¨¡å‹
php artisan module:make-model Blog Post

# åˆ›å»ºè¯·æ±‚éªŒè¯
php artisan module:make-request Blog PostRequest

# åˆ›å»ºè¿ç§»
php artisan module:make-migration Blog create_posts_table
php artisan module:make-migration Blog create_posts_table --create=posts

# åˆ›å»ºäº‹ä»¶å’Œç›‘å¬å™¨
php artisan module:make-event Blog PostCreated
php artisan module:make-listener Blog PostCreatedListener --event=PostCreated

# åˆ›å»ºä¸­é—´ä»¶
php artisan module:make-middleware Blog CheckPostStatus

# åˆ›å»ºæœåŠ¡æä¾›è€…
php artisan module:make-provider Blog CustomProvider

# åˆ›å»ºå‘½ä»¤
php artisan module:make-command Blog TestCommand --command=blog:test

# åˆ›å»ºæ•°æ®å¡«å……å™¨
php artisan module:make-seeder Blog PostSeeder

# åˆ›å»ºç­–ç•¥
php artisan module:make-policy Blog PostPolicy

# åˆ›å»ºè§‚å¯Ÿè€…
php artisan module:make-observer Blog PostObserver
```

### æ¨¡å—ç®¡ç†å‘½ä»¤

```bash
# åˆ—å‡ºæ‰€æœ‰æ¨¡å—
php artisan module:list

# æŸ¥çœ‹æ¨¡å—è¯¦ç»†ä¿¡æ¯
php artisan module:info Blog

# éªŒè¯æ¨¡å—å®Œæ•´æ€§
php artisan module:validate Blog

# è°ƒè¯•å‘½ä»¤
php artisan module:debug-commands --module=Blog
```

### è¿ç§»ç®¡ç†å‘½ä»¤

```bash
# è¿è¡Œè¿ç§»
php artisan module:migrate
php artisan module:migrate Blog

# æŸ¥çœ‹è¿ç§»çŠ¶æ€
php artisan module:migrate-status

# å›æ»šè¿ç§»
php artisan module:migrate:reset Blog

# åˆ·æ–°è¿ç§»
php artisan module:migrate:refresh Blog
```

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

### v2.4.0 (2026-01-23)
- ğŸ›¡ï¸ **å®‰å…¨å¢å¼º**ï¼š
  - ä¿®å¤ `module:migrate-status` å‘½ä»¤å‚æ•°ç±»å‹é”™è¯¯
  - å¢å¼º `module:make-model` SQL æŸ¥è¯¢å®‰å…¨æ€§ï¼Œä½¿ç”¨ Schema::hasTable() æ£€æŸ¥è¡¨
  - æ”¹è¿› `module:make-route` è·¯ç”±ç±»å‹éªŒè¯å’Œé”™è¯¯å¤„ç†
  - ä¿®å¤ `SHOW TABLES LIKE` SQL è¯­æ³•é”™è¯¯ï¼Œæ”¹ç”¨ Laravel Schema facade
- ğŸ”§ **ä»£ç è´¨é‡ä¼˜åŒ–**ï¼š
  - å…¨é¢æ£€æŸ¥æ‰€æœ‰ Command ç±»ï¼Œä¿®å¤ç±»å‹å£°æ˜é—®é¢˜
  - ä¼˜åŒ–å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¢å¼ºé”™è¯¯æç¤º
  - ç»Ÿä¸€ä»£ç é£æ ¼å’Œæ³¨é‡Šè§„èŒƒ
- ğŸ› **Bug ä¿®å¤**ï¼š
  - ä¿®å¤ `getMigrationStatus` æ–¹æ³•å‚æ•°ç±»å‹å£°æ˜é”™è¯¯
  - ä¿®å¤ `module:make-model` å‘½ä»¤ SQL è¯­æ³•é”™è¯¯ï¼ˆMySQL ä¸æ”¯æŒ SHOW TABLES LIKE å‚æ•°ç»‘å®šï¼‰
  - ä¿®å¤è·¯å¾„éå†æ½œåœ¨é£é™©ï¼Œæ·»åŠ è·¯å¾„æ ¡éªŒ
- ğŸ“ **æ–‡æ¡£æ›´æ–°**ï¼š
  - æ›´æ–°è¿ç§»çŠ¶æ€å‘½ä»¤æ–‡æ¡£
  - å®Œå–„å®‰å…¨ç›¸å…³è¯´æ˜
  - ä»£ç æ³¨é‡Šå…¨é¢ä¸­æ–‡åŒ–

### v2.3.0 (2026-01-21)
- ğŸ“š **å¤šæ¨¡å—ç”¨æˆ·æŒ‡å—**ï¼šæ–°å¢ `ModulesUserGuide.md` ç»Ÿä¸€ç”¨æˆ·æŒ‡å—
- ğŸš€ **æ¨¡å—å‘å¸ƒå‘½ä»¤**ï¼šæ–°å¢ `module:publish` å‘½ä»¤å‘å¸ƒèµ„æº
- ğŸ“– **è‡ªåŠ¨å‘å¸ƒæŒ‡å—**ï¼šåˆ›å»ºæ¨¡å—æ—¶è‡ªåŠ¨å‘å¸ƒç”¨æˆ·æŒ‡å—
- ğŸ—‘ï¸ **ç§»é™¤æ¨¡å— README**ï¼šä¸å†ä¸ºæ¯ä¸ªæ¨¡å—åˆ›å»º README.md
- ğŸ“ **åŠ å¼ºä¸­æ–‡æç¤º**ï¼šæ‰€æœ‰å‘½ä»¤çš„æ³¨é‡Šå’Œæç¤ºéƒ½ä½¿ç”¨ä¸­æ–‡
- ğŸ¯ **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼šæ›´å‹å¥½çš„å‘½ä»¤è¾“å‡ºå’Œé”™è¯¯æç¤º
- ğŸ”§ **æ•´ä½“ä¼˜åŒ–**ï¼šå…¨é¢ä¼˜åŒ–é¡¹ç›®ä»£ç å’Œæ–‡æ¡£

### v2.2.0 (2026-01-20)
- ğŸ¯ **ä¿®å¤å‘½ä»¤æ³¨å†Œé—®é¢˜**ï¼šå½»åº•è§£å†³æ¨¡å—å‘½ä»¤æ— æ³•æ‰§è¡Œçš„é—®é¢˜
- ğŸš€ **å‘½ä»¤è‡ªåŠ¨å‘ç°**ï¼šæ¨¡å—å‘½ä»¤è‡ªåŠ¨æ³¨å†Œåˆ° Laravel Console Application
- ğŸ› ï¸ **å…¨å±€å‘½ä»¤ç¼“å­˜**ï¼šä½¿ç”¨é™æ€ç¼“å­˜ä¼˜åŒ–å‘½ä»¤æ³¨å†Œæ€§èƒ½
- ğŸ“ **å‘½ä»¤ç­¾åä¼˜åŒ–**ï¼šä¿®å¤å‘½ä»¤ç­¾åç”Ÿæˆé€»è¾‘ï¼Œä½¿ç”¨æ­£ç¡®çš„æ ¼å¼
- ğŸ”§ **é™çº§æ³¨å†Œæ–¹æ¡ˆ**ï¼šå¤šå±‚é™çº§æœºåˆ¶ç¡®ä¿å‘½ä»¤å¯é æ³¨å†Œ
- ğŸ“š **è°ƒè¯•å·¥å…·**ï¼šæ–°å¢ `module:debug-commands` å‘½ä»¤
- ğŸ“– **å®Œæ•´æ–‡æ¡£**ï¼šæ–°å¢å‘½ä»¤æ•…éšœæ’é™¤å’Œæµ‹è¯•æŒ‡å—

### v2.1.0
- ğŸ¯ æ™ºèƒ½å½“å‰æ¨¡å—æ£€æµ‹ï¼š`module_name()` æ— éœ€ä¼ é€’å‚æ•°
- ğŸ“ å¢å¼ºé…ç½®è¯»å–ï¼šæ”¯æŒ `module_config('common.name', 'default')` æ ¼å¼
- ğŸ”§ å®Œå–„é…ç½®åŠ è½½å™¨ï¼šæ”¯æŒå½“å‰æ¨¡å—é…ç½®æ–‡ä»¶è¯»å–
- ğŸ› ï¸ ä¼˜åŒ–è·¯ç”±åŠ è½½ï¼šæ›´çµæ´»çš„è·¯ç”±å’Œæ§åˆ¶å™¨å¤„ç†
- ğŸ“¦ æ–°å¢å¤šä¸ªåŠ©æ‰‹å‡½æ•°ï¼š`module_has_view`ã€`module_config_path` ç­‰
- ğŸ“š å®Œå–„æ–‡æ¡£ï¼šè¯¦ç»†è¯´æ˜æ–°åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•

### v2.0.0
- ğŸ¨ å…¨æ–°åŸºäº stubs çš„æ¨¡æ¿ç³»ç»Ÿ
- ğŸ–¼ï¸ æ”¯æŒæ¨¡å—è§†å›¾å‘½åç©ºé—´
- ğŸŒ å¢å¼ºçš„è·¯ç”±æ§åˆ¶å™¨å‘½åç©ºé—´æ˜ å°„
- ğŸ“‚ æ”¯æŒå¤šè·¯å¾„æ¨¡å—æ‰«æ
- ğŸ”§ å®Œå–„çš„é…ç½®é€‰é¡¹
- ğŸ“ æ›´å¤šåŠ©æ‰‹å‡½æ•°
- ğŸš€ æ€§èƒ½ä¼˜åŒ–
- ğŸ› Bug ä¿®å¤

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚

åœ¨æäº¤ PR ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. ä»£ç éµå¾ª PSR-12 ç¼–ç æ ‡å‡†
2. æ‰€æœ‰å‡½æ•°éƒ½æœ‰å®Œæ•´çš„ä¸­æ–‡æ³¨é‡Š
3. æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
4. æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub ä»“åº“](https://github.com/zxf/modules)
- [é—®é¢˜åé¦ˆ](https://github.com/zxf/modules/issues)
- [åŠŸèƒ½å»ºè®®](https://github.com/zxf/modules/discussions)

## â­ æ”¯æŒ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª star â­

---

**å¼€å‘å›¢é˜Ÿ**ï¼šzxf
**ç‰ˆæœ¬**ï¼š2.4.0
**Laravel ç‰ˆæœ¬**ï¼š11+
**PHP ç‰ˆæœ¬**ï¼š8.2+
